{"version":3,"file":"public/BOB.js","sources":["app/scripts/BOB.coffee","app/scripts/BOBChildArray.coffee"],"names":[],"mappings":"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","sourcesContent":["# BOB\n\n# build or bail\n\nclass BOB\n\tBOB._data = null\n\t\n\tBOB.find = (selector) ->\n\t\t#TODO: this selects an existing element, and append/prepend/inserts into that\n\tBOB.data = ->\n\t\treturn BOB._data\n\tBOB.d = ->\n\t\treturn BOB._data\n\tBOB.get_or_create_bob = (data, options, parent) ->\n\t\tchild_bob = null\n\t\tif data instanceof BOB\n\t\t\tchild_bob = data\n\t\telse\n\t\t\tchild_bob = new BOB(data, options, parent)\n\t\treturn child_bob\n\n\tBOB.toVariable = (data) ->\n\t\tif typeof data is 'function'\n\t\t\treturn data()\n\t\telse\n\t\t\treturn data\n\n\tconstructor: (selector, options, parent=null, preBob=null, contentBob=null, postBob=null) ->\n\t\tif selector.indexOf(\" \") > -1\n\t\t\tconsole.error(\"Invalid BOB selector. \\\"\" + selector + \"\\\" contains \\\" \\\"(space). Only allowed is \\\"tag\\\", \\\"tag.class\\\", or \\\"tag#id\\\".\")\n\t\t\treturn \"Invalid selector. See console log for more details.\"\n\n\t\t@parent = parent\n\n\t\t#Flatting so BOB.data gets parsed out to the correct thing.\n\t\t@options = {}\n\t\tif options\n\t\t\tfor key, value of options\n\t\t\t\t@options[key] = BOB.toVariable(value)\n\n\t\t@preBob = preBob\n\t\t@innerBob = contentBob\n\t\t@postBob = postBob\n\n\t\t@type = selector\n\t\t@object_class = null\n\t\t@object_id = null\n\t\t@object_content = \"\"\n\t\t@object_style = null\n\n\t\tif selector.indexOf(\".\") > -1\n\t\t\t[@type, @object_class] = selector.split(\".\")\n\t\telse if selector.indexOf(\"#\") > -1\n\t\t\t[@type, @object_id] = selector.split(\"#\")\n\n\tcontent: (content) ->\n\t\tthis.co(content)\n\tco: (content) ->\n\t\tchild = this.i(\"\")\n\t\tchild.object_content = BOB.toVariable(content)\n\t\treturn this\n\n\tstyle: (style) ->\n\t\tthis.st(style)\n\tst: (style) ->\n\t\t@object_style = BOB.toVariable(style)\n\t\treturn this\n\n\tclass: (object_class) ->\n\t\tthis.cl(object_class)\n\tcl: (object_class) ->\n\t\t@object_class = BOB.toVariable(object_class)\n\t\treturn this\n\n\tid: (object_id) ->\n\t\t@object_id = BOB.toVariable(object_id)\n\t\treturn this\n\n\tinsert: (data, options) ->\n\t\tthis.i(data,options)\n\ti: (data, options) ->\n\t\tchild_bob = BOB.get_or_create_bob(data, options, this)\n\n\t\tif @innerBob\n\t\t\t@innerBob.a(child_bob)\n\t\telse\n\t\t\t@innerBob = child_bob\n\n\t\treturn child_bob\n\n\tappend: (data, options) ->\n\t\tthis.a(data, options)\n\ta: (data, options) ->\n\t\tnew_bob = BOB.get_or_create_bob(data, options, @parent)\n\t\tif @postBob\n\t\t\t@postBob.a(new_bob)\n\t\telse\n\t\t\t@postBob = new_bob\n\t\n\tprepend: (data, options) ->\n\t\tthis.p(data, options)\n\tp: (data, options) ->\n\t\tnew_bob = BOB.get_or_create_bob(data, options, @parent)\n\t\tif @preBob\n\t\t\t@preBob.p(new_bob)\n\t\telse\n\t\t\t@preBob = new_bob\n\n\tdo: (dataset)->\n\t\tthis.d(dataset)\n\td: (dataset)->\n\t\tchild_array = new BOBChildArray(dataset, this)\n\t\t# @doData = dataset\n\t\t# @inDO = true\n\t\treturn child_array\n\n\tup: ->\n\t\t@parent\n\tu: ->\n\t\t@parent\n\n\ttoString: ->\n\t\tthis.s()\n\ts: ->\n\t\t#this makes the toString bubble to the top if it is cast on a sub-element\n\t\tif @parent\n\t\t\treturn @parent.s()\n\t\t\n\t\t#kill parents so they will print out.\n\t\t@innerBob.parent = null if @innerBob\n\t\t@preBob.parent     = null if @preBob\n\t\t@postBob.parent    = null if @postBob\n\n\t\tprepend = ''\n\t\tappend = ''\n\t\tprintself = ''\n\t\tcontent_b = ''\n\n\t\tcontent_b = @innerBob.s() if @innerBob\n\t\tprepend = @preBob.s() if @preBob\n\t\tappend = @postBob.s() if @postBob\n\t\t#TODO: Make special case for img (or those without content?) and no-type tag, which is pure text content.\n\t\t\n\t\tif @type != \"\"\n\t\t\tprintself += '<' + @type + ' '\n\t\t\tfor key, value of @options\n\t\t\t\tunless key == 'style' && @object_style || key == 'id' && @object_id || key == 'class' && @object_class\n\t\t\t\t\tprintself += key + '=\"' + value + '\" '\n\t\t\t\n\t\t\tprintself += 'class=\"' + @object_class + '\" ' if @object_class\n\t\t\tprintself += 'id=\"'    + @object_id    + '\" ' if @object_id\n\t\t\tprintself += 'style=\"' + @object_style + '\" ' if @object_style\n\n\t\t\tprintself = printself.slice(0, -1)\n\t\t\tclosable = ([\"area\",\n\t\t\t\t\t\t\"base\",\n\t\t\t\t\t\t\"br\",\n\t\t\t\t\t\t\"col\",\n\t\t\t\t\t\t\"embed\",\n\t\t\t\t\t\t\"hr\",\n\t\t\t\t\t\t\"img\",\n\t\t\t\t\t\t\"input\",\n\t\t\t\t\t\t\"keygen\",\n\t\t\t\t\t\t\"link\",\n\t\t\t\t\t\t\"menuitem\",\n\t\t\t\t\t\t\"meta\",\n\t\t\t\t\t\t\"param\",\n\t\t\t\t\t\t\"source\",\n\t\t\t\t\t\t\"track\",\n\t\t\t\t\t\t\"wbr\",\n\t\t\t\t\t\t\"basefont\",\n\t\t\t\t\t\t\"bgsound\",\n\t\t\t\t\t\t\"frame\",\n\t\t\t\t\t\t\"isindex\"].indexOf(@type) != -1)\n\n\t\t\tif closable && content_b == ''\n\t\t\t\tprintself += ' />'\n\t\t\telse\t\n\t\t\t\tprintself += '>' + content_b + '</' + @type + '>'\n\t\telse\n\t\t\t#pure text element (no type)\n\t\t\tprintself = @object_content #it should not have any innerBob as it is never exposed when we are setting object_content\n\n\t\treturn prepend + printself + append\n\n\t# new BOB(\"div\",{test: \"lol\"}).do([\"data\"]).add(\"p\",funtion(d){this.insert(\"div\",{a: d.height})})\n\n\t# new BOB(\"ul\",{class: \"lol\"})\n\t# \t.do(dataset)\n\t# \t.insert(\"li\", {dataProp: BOB.data}) #?\n\t# \t\t.content(BOB.data)              #?\n\t# \t.insert(\"p\")\n\t# \t\t.content(\"lol\")\n\t# \t.up()\n\t# \t.up()\n\t# \t.insert(\"p\")\n\t# \t\t.content(\"lol2\")\n\t# \t.up()\n\t# \t.append(\"ul\",{class: \"shiet\"})\n\t# \t.append(\"ul\",{class: \"shiet\"})\n\t# \t.prepend(\"ul\",{class: \"shiet\"})\n\t# \t.toString();\n\n","class BOBChildArray\n\tconstructor: (dataset, parent) ->\n\t\t@dataset = dataset\n\t\t@parent = parent\n\t\t@bobs = []\n\n\t#No point in doing this on parent. Does not make sense to do \".do(data).id(BOB.data)\"\n\tcontent: (content) ->\n\t\tthis.co(content)\n\tco: (content) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\t@bobs[i].co(content) if @bobs[i]\n\t\treturn this\n\n\tstyle: (style) ->\n\t\tthis.st(style)\n\tst: (style) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\t@bobs[i].st(style) if @bobs[i]\n\t\treturn this\n\n\tclass: (object_class) ->\n\t\tthis.cl(object_class)\n\tcl: (object_class) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\t@bobs[i].cl(object_class) if @bobs[i]\n\t\treturn this\n\n\tid: (object_id) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\t@bobs[i].id(object_id) if @bobs[i]\n\t\treturn this\n\n\tinsert: (data, options) ->\n\t\tthis.i(data, options)\t\n\ti: (data, options) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\tif @bobs[i]\n\t\t\t\t@bobs[i] = @bobs[i].insert(data, options)\n\t\t\telse\n\t\t\t\t@bobs.push(@parent.insert(data, options))\n\t\t\t\t\n\t\treturn this\n\n\tappend: (data, options) ->\n\t\tthis.a(data, options)\n\ta: (data, options) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\tif @bobs[i]\n\t\t\t\t@bobs[i] = @bobs[i].a(data, options)\n\t\t\telse\n\t\t\t\t@bobs.push(@parent.a(data, options))\n\n\t\treturn this\n\n\tprepend: (data, options) ->\n\t\tthis.p(data, options)\n\tp: (data, options) ->\n\t\tfor i in [0...@dataset.length]\n\t\t\tBOB._data = @dataset[i]\n\t\t\tif @bobs[i]\n\t\t\t\t@bobs[i] = @bobs[i].p(data, options)\n\t\t\telse\n\t\t\t\t@bobs.push(@parent.p(data, options))\n\n\t\treturn this\n\n\ttoString: ->\n\t\tthis.s()\t\n\ts: ->\n\t\tif @parent\n\t\t\treturn @parent.s()\n\t\telse\n\t\t\thtml_string = \"\"\n\t\t\tfor bob in @bobs\n\t\t\t\tbob.parent = false\n\t\t\t\thtml_string += bob.s()\n\t\t\treturn html_string\n\n\t#TODO: do(data).do(data2) does not behave correctly\n\tdo: (data)->\n\t\tthis.d(data)\n\td: (data)->\n\t\tfor bob in @bobs\n\t\t\tBOB._data = @dataset[i]\n\t\t\tif @bobs[i]\n\t\t\t\t@bobs[i] = @bobs[i].d(data)\n\t\t\telse\n\t\t\t\t@bobs.push(@parent.d(data))\n\t\t\t\n\t\treturn this\n\tup: ->\n\t\tthis.u()\n\tu: ->\n\t\tunless @bobs[0]\n\t\t\tBOB._data = null\n\t\t\treturn @parent\n\n\n\t\tfor i in [0...@bobs.length]\n\t\t\t@bobs[i] = @bobs[i].u()\n\n\t\tif @bobs[0] == @parent\n\t\t\tBOB._data = null\n\t\t\treturn @parent\n\t\telse\n\t\t\treturn this\n"]}